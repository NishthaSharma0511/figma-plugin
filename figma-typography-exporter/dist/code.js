figma.showUI(__html__,{width:400,height:300});console.log("[Plugin] âœ… code.ts loaded");figma.ui.onmessage=async e=>{if(console.log("[Plugin] ðŸ“© Received message â–¶",e),e.type==="get-typography-tokens"){const a=e.framework,o=s(),n=p(),t=g(),c=l(),r={typography:i(o,a,"typography"),colors:i(n,a,"colors"),spacing:i(t,a,"spacing"),icons:i(c,a,"icons")};figma.ui.postMessage({type:"tokens-ready",payload:r})}};function s(){return figma.getLocalTextStyles().map(e=>({name:e.name,fontSize:e.fontSize,fontName:e.fontName,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing}))}function p(){return figma.getLocalPaintStyles().map(e=>({name:e.name,color:e.paints[0].type==="SOLID"?e.paints[0].color:null}))}function g(){return[{name:"spacing-xs",value:"4px"},{name:"spacing-sm",value:"8px"},{name:"spacing-md",value:"16px"},{name:"spacing-lg",value:"32px"}]}function l(){return figma.currentPage.findAll(e=>e.type==="COMPONENT"&&e.name.toLowerCase().includes("icon")).map(e=>({name:e.name,id:e.id}))}function i(e,a,o){switch(a){case"Tailwind":return e.map(n=>`${o}-${n.name.replace(/\s+/g,"-").toLowerCase()}: ${n.value||n.fontSize||"..."};`).join(`
`);case"CSS Variables":return e.map(n=>`--${o}-${n.name.replace(/\s+/g,"-").toLowerCase()}: ${n.value||n.fontSize||"..."};`).join(`
`);case"SCSS":return e.map(n=>`$${o}-${n.name.replace(/\s+/g,"-").toLowerCase()}: ${n.value||n.fontSize||"..."};`).join(`
`);case"TypeScript Tokens":return`export const ${o}Tokens = {
`+e.map(n=>`  "${n.name.replace(/\s+/g,"_")}": "${n.value||n.fontSize||"..."}"`).join(`,
`)+`
};`;default:return""}}
